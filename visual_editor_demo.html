<!DOCTYPE HTML>
<html>
  <head>
    <title>Visual Editor Demo</title>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <script src="http://d3lp1msu2r81bx.cloudfront.net/kjs/js/lib/kinetic-v4.7.2.min.js"></script>
    <script defer="defer">
      function writeMessage(message) {
        text.setText(message);
        layer.draw();
      }
      
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 800,
        height: 800
      });

      var layer = new Kinetic.Layer();

      //VIKRAMS TEST STUFF
      
      var line = new Kinetic.Line({
        x: 200,
        y: 0,
        points: [200, 0, 200,800],
        stroke: 'red'
      });
      layer.add(line);

      var tools = [{'title':'Method', 'jstext':'function newMethod() {'},
                   {'title':'Variable', 'jstext':'var'},
                   {'title':'End', 'jstext':'}'},
                  ]
      var box = {};
      var boxText = {};
      var group = {};
      var methods = 1;
      var startX = 20;
      var startY = 30;
      for (var i=0; i<tools.length; i++) {
            group[i] = new Kinetic.Group({
              x: startX,
              y: startY,
            });

              boxText[i] = new Kinetic.Text({
              x: startX,
              y: startY,
              text: tools[i].title,
              fontSize: 24,
              fontFamily: 'Calibri',
              fill: 'black',
              align: 'left',
            });

            box[i] = new Kinetic.Rect({
            x: startX,
            y: startY,
            width: 100,
            height: 50,
            fill: '#00D2FF',
            stroke: 'black',
            strokeWidth: 3,
            draggable: true,
            offset:10,
          });


          group[i].add(box[i]);
          group[i].add(boxText[i]);
          startY = startY + 65;
          layer.add(group[i]);
          layer.add(box[i]);
          layer.add(boxText[i]);
      }

      box[0].on('dragstart', function() {
        boxText[0].setX(box[0].getX());
        boxText[0].setY(box[0].getY());
      });

      box[0].on('dragmove', function() {
        boxText[0].setX(box[0].getX());
        boxText[0].setY(box[0].getY());
      });

      box[0].on('dragend', function() {
        boxText[0].setX(box[0].getX());
        boxText[0].setY(box[0].getY());
        if (box[0].getAttr('x')>=400) {
          console.log(tools[0].jstext)
          }
      });

      box[1].on('dragstart', function() {
        boxText[1].setX(box[1].getX());
        boxText[1].setY(box[1].getY());
      });

      box[1].on('dragmove', function() {
        boxText[1].setX(box[1].getX());
        boxText[1].setY(box[1].getY());
      });

      box[1].on('dragend', function() {
        boxText[1].setX(box[1].getX());
        boxText[1].setY(box[1].getY());
        if (box[1].getAttr('x')>=400) {
          console.log(tools[1].jstext)
        }
      });

      box[2].on('dragstart', function() {
        boxText[2].setX(box[2].getX());
        boxText[2].setY(box[2].getY());
      });

      box[2].on('dragmove', function() {
        boxText[2].setX(box[2].getX());
        boxText[2].setY(box[2].getY());
      });

      box[2].on('dragend', function() {
        boxText[2].setX(box[2].getX());
        boxText[2].setY(box[2].getY());
        if (box[2].getAttr('x')>=400) {
          console.log(tools[2].jstext)
        }
      });
     

      var text = new Kinetic.Text({
        x: 10,
        y: 10,
        fontFamily: 'Calibri',
        fontSize: 24,
        text: '',
        fill: 'black'
      });
      
     /* var box = new Kinetic.Rect({
        x: 15,
        y: 90,
        width: 100,
        height: 50,
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 3,
        draggable: true,
        offset:10,
      });

      var box2= new Kinetic.Rect({
        x: 15,
        y: 15,
        
        width: 100,
        height: 50,
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 3,
        draggable: true,
        offset:10,
      });
      var box3= new Kinetic.Rect({
        x: 15,
        y: 165,
        width: 100,
        height: 50,
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 3,
        draggable: true,
        offset:10
      });

     
     var rectangleText = new Kinetic.Text({

        x: 15,
        y: 10,
        text: 'test',
        fontSize: 20,
        fontFamily: 'Calibri',
        textFill: 'black'

    });


      // write out drag and drop events
      box.on('dragstart', function() {
        writeMessage('dragstart');
      });
      box.on('dragend', function() {
        writeMessage('dragend');
        if (box.getAttr('x')>=400) {
          console.log("}")
        };
      });
      box2.on('click', function() {
        writeMessage('dragstart');
      });
      box2.on('dragend', function() {
        writeMessage('dragend');
        if (box2.getAttr('x')>=400) {
          console.log("Method(){")
        };

      });
      box3.on('click', function() {
        writeMessage('dragstart');
      });
      box3.on('dragend', function() {
        writeMessage('dragend');
        if (box2.getAttr('x')>=400) {
          console.log("Var")
        };
        
      });
layer.add(line);
layer.add(text);
layer.add(box);
layer.add(box2);
layer.add(box3);

*/

      stage.add(layer);

    </script>
  </body>
</html>